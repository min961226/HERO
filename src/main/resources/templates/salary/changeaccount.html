<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<meta charset="UTF-8">
<link rel="shortcut icon" th:href="@{/images/favicon.ico}">
</head>
<body>
	<div id="wrapper">
		<div th:include="common/sidebar.html"></div>
		<div class="content-page">
			<div class="content">
				<div class="container-fluid">
					<!-- start page title -->
					<div class="row">
						<div class="col-12">
							<br>
							<div class="page-title-box">
								<h3 class="page-title"><b>내 급여 계좌</b></h3>
							</div>
							<hr>
							<!-- 여기서부터 본문 생성 -->
							<div class="col-10" style="margin:0 auto;">
								<div class="card">
									<div class="card-body">
										<table class="table table-striped dt-responsive nowrap w-80 text-center" id="account">
											<thead>
												<tr>								
													<th>구분</th>											
													<th>은행명</th>											
													<th>계좌번호</th>											
													<th>통장사본</th>										
													<th>등록일자</th>																												
												</tr>
											</thead>
											
											<tbody>
												<tr th:each="account,num : ${accountList}">
													<td th:text="${num.count}"></td>
													<td th:text="${account.bankName}"></td>
													<td th:text="${account.accountNo}"></td>
													<td></td>
													<td th:text="${account.enrollDate}"></td>
												</tr>
											</tbody>
										</table>
										<br>
										<button type="button" class="btn btn-info" id="change" style="float: right;"
										data-bs-toggle="modal" data-bs-target="#registAccount">등록</button>
										
										<!-- 급여계좌 추가 모달창 -->
										<div class="modal fade" id="registAccount" tabindex="-1" role="dialog" aria-labelledby="myCenterModalLabel" aria-hidden="true">
	                                        <div class="modal-dialog modal-dialog-centered">
	                                             <div class="modal-content">
	                                                    <div class="modal-header">
	                                                        <h4 class="modal-title" id="registAccountModal"><b>급여 계좌 추가</b></h4>
	                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	                                                    </div>
	                                                    <div class="modal-body">
	                                                    	<div>
		                                                        <label style="margin:5px; display: none;" id="memberNo" ></label>		                                                       
		                                                        <label style="margin:10px;">성명 :</label><input type="text"><br>
		                                                        <label style="margin:10px;">주민등록번호 :</label><input type="text" style="margin:5px;"><br>
		                                                        <select style="margin:10px;" name="bankList" id="bankList">
		                                                        	
		                                                        </select>
		                                                        <input type="text" style="margin:10px;" id="certification">
		                                                        <button type="button" class="btn btn-info width-xs" id="confirm">계좌인증</button>
	                                                    	</div>	                                                  
	                                                    </div>
	                                                   <div class="modal-footer">
		                                                   	<button type="reset" class="btn btn-warning width-xs" data-bs-dismiss="modal">닫기</button>
		                   									<button type="button" class="btn btn-success width-xs">계좌인증</button>
	                                                   </div> 
	                                              </div>
	                                        </div>
	                                     </div> <!-- 급여계좌 추가 모달창 종료 -->
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div th:include="common/footer.html"></div>
		</div>
	</div>
	<script>
		$("#change").click(function() {
			$.ajax({
				url: "/salary/bankList",
				method: "POST",
				success: function(data) {
					const $bankList = $("#bankList");
					$bankList.html("");				
					$bankList.append($("<option>").text("은행명"));
					
					for(let index in data) {
						$bankList.append($("<option>").val(data[index].code).text(data[index].bankName));
					}
				},
				error: function(xhr) {
					alert("잠시 후 다시 시도해주세요");
				}
				
			});
	
		});
	
		
		$("#confirm").click(function() {
			// 계좌인증 api
			
		});
	
	
	
	</script>
</body>
</html>